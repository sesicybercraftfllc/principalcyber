<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cybercraft</title>
    <style>
        /* PALETA DE CORES TERROSAS */
        :root {
            --cor-background: #f7f4e9; /* Bege claro / Off-White */
            --cor-principal: #6b4423;    /* Marrom Café */
            --cor-secundaria: #8b5e34;  /* Marrom Médio */
            --cor-borda: #d4c7b2;        /* Bege acinzentado */
            --cor-texto-principal: #333;
            --cor-destaque-usuario: #4a784d; /* Verde Musgo */
            --cor-destaque-dev: #e0c29a;     /* Ocre/Bege Quente */
            --cor-erro: #cc0000; /* Cor Vermelha para Erro */
        }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; 
            padding: 20px;
            background-color: var(--cor-background); 
            color: var(--cor-texto-principal);
        }
        .container { 
            max-width: 900px; 
            margin: 0 auto; 
            background-color: #fff; 
            padding: 30px; 
            border-radius: 12px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); 
        }
        h1 { 
            text-align: center; 
            color: var(--cor-principal); 
            border-bottom: 2px solid var(--cor-borda); 
            padding-bottom: 10px;
        }
        h2, h3 { color: var(--cor-secundaria); }
        
        /* Formulários e Painéis */
        #login-form, #dev-panel { 
            margin-top: 20px; 
            padding: 20px; 
            border: 1px solid var(--cor-borda); 
            border-radius: 8px; 
            background-color: #ffffff;
        }
        #login-form input[type="text"], #login-form input[type="password"],
        #dev-panel input[type="text"], #dev-panel select, #item-file { 
            padding: 10px; 
            margin-bottom: 12px; 
            width: 100%; 
            box-sizing: border-box; 
            border: 1px solid var(--cor-borda);
            border-radius: 4px;
        }
        /* Botão de Arquivo */
        #item-file { padding: 5px; }

        /* Botões */
        button { 
            padding: 10px 15px; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer; 
            transition: background-color 0.3s;
        }
        /* Botão Desenvolvedor */
        #login-form button { 
            background-color: var(--cor-principal); 
            color: white; 
            width: 100%;
        }
        #login-form button:hover { background-color: #4a2f1c; }

        /* Botão Usuário */
        #login-section button:last-of-type { 
            background-color: var(--cor-destaque-usuario); 
            color: white; 
            width: 100%;
            margin-top: 15px;
        }
        #login-section button:last-of-type:hover { background-color: #3b603e; }

        /* Botões Sair e Ações Dev */
        #dev-panel button, #user-view button { 
            background-color: var(--cor-secundaria); 
            color: white;
        }
        #dev-panel button:hover, #user-view button:hover { background-color: var(--cor-principal); }
        
        /* Estilo dos Links/Arquivos */
        .file-item a { color: var(--cor-principal); text-decoration: none; font-weight: bold;}
        .file-item a:hover { text-decoration: underline; }
        .dev-info { font-size: 0.85em; color: var(--cor-secundaria); margin-top: 5px; }

        /* Visualização do Usuário */
        #user-view h2 { color: var(--cor-destaque-usuario); }
        .file-item { 
            border: 1px solid var(--cor-borda); 
            padding: 15px; 
            margin-bottom: 10px; 
            border-radius: 6px; 
            background-color: #fffaf0; 
        }
        .file-item img, .file-item video { max-width: 100%; height: auto; border-radius: 4px; margin-top: 10px; }
        
        /* Mensagem de Erro */
        .error-message {
            font-size: 2em;
            font-weight: bold;
            color: var(--cor-erro);
            text-align: center;
            padding: 20px 0;
            border-top: 1px dashed var(--cor-borda);
            margin-top: 10px;
        }

        /* Estilos para o Quiz */
        .quiz-container {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid var(--cor-secundaria); 
            border-radius: 8px;
            background-color: var(--cor-background); 
            text-align: left;
        }
        .quiz-question {
            font-weight: bold;
            color: var(--cor-principal);
            margin-bottom: 15px;
            padding-top: 15px;
            border-top: 1px dotted var(--cor-borda);
        }
        .quiz-option {
            margin-bottom: 8px;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
            border: 1px solid transparent;
        }
        .quiz-option:hover {
            background-color: #e0d9c9;
        }
        .quiz-result {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid var(--cor-borda);
            font-weight: bold;
            text-align: center;
        }
        .correct { color: var(--cor-destaque-usuario); } /* Verde */
        .incorrect { color: var(--cor-erro); } /* Vermelho */


        /* Painel do Desenvolvedor */
        .dev-item { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border: 1px solid var(--cor-destaque-dev); 
            padding: 10px; 
            margin-bottom: 10px; 
            border-radius: 6px; 
            background-color: var(--cor-destaque-dev); 
            color: var(--cor-principal);
        }
        .dev-item span strong { color: var(--cor-principal); }
        .dev-item > span { width: 70%; } 

        .folder-selector { margin-bottom: 20px; }
        .folder-selector button {
            background-color: var(--cor-borda);
            color: var(--cor-texto-principal);
            margin-right: 5px;
        }
        .folder-selector button.active {
            background-color: var(--cor-principal);
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Cybercraft</h1>

        <div id="login-section">
            <div id="login-form">
                <h3>Login do Desenvolvedor</h3>
                <input type="text" id="username" placeholder="Usuário">
                <input type="password" id="password" placeholder="Senha">
                <button onclick="developerLogin()">Entrar como Desenvolvedor</button>
            </div>
            <p style="text-align: center;">Ou</p>
            <button onclick="userLogin()">Entrar como Usuário Comum (Visualização)</button>
        </div>

        <div id="dev-panel" style="display: none;">
            <h2>Painel do Desenvolvedor (<span id="dev-name"></span>)</h2>
            
            <h3>Adicionar Novo Item</h3>
            <label for="item-folder">Pasta:</label>
            <select id="item-folder">
                <option value="projetos">Projetos</option>
                <option value="documentacao">Documentação</option>
                <option value="tutoriais">Tutoriais</option>
                <option value="midia">Mídia</option>
                <option value="diversos">Diversos</option>
                <option value="conscientizacao">Conscientização</option>
            </select><br><br>
            
            <label for="file-type">Tipo:</label>
            <select id="file-type" onchange="toggleInputType()">
                <option value="link">Link</option>
                <option value="foto">Foto</option>
                <option value="video">Vídeo</option>
            </select><br><br>
            
            <label for="item-name">Nome do Item:</label>
            <input type="text" id="item-name" placeholder="Ex: Relatório Final" style="width: 100%; margin-bottom: 10px;"><br>
            
            <div id="dynamic-input-container">
                <label for="item-url">URL (Link):</label>
                <input type="text" id="item-url" placeholder="http://recurso.com/link" style="width: 100%; margin-bottom: 10px;">
            </div>
            
            <label>Visível para Usuário?</label>
            <input type="checkbox" id="item-visible" checked><br><br>
            
            <button onclick="addItem()">Adicionar Item</button>

            <hr>

            <h3>Arquivos Gerenciáveis por Pasta</h3>
            <div class="folder-selector" id="dev-folder-selector">
                </div>
            <div id="dev-file-list">
                </div>
            <button onclick="logout()">Sair</button>
        </div>

        <div id="user-view" style="display: none;">
            <h2>Visualização do Usuário</h2>
            <div class="folder-selector" id="user-folder-selector">
                </div>
            <div id="user-file-list">
                </div>
            <button onclick="logout()">Sair</button>
        </div>
    </div>

    <script>
        // --- Configurações ---
        const DEVELOPERS = {
            "dev01": "123", "dev02": "456", "dev03": "789", 
            "dev04": "101", "dev05": "112", "dev06": "131", 
            "dev07": "415", "dev08": "161"
        };
        const FOLDERS = {
            "projetos": "Projetos", "documentacao": "Documentação", "tutoriais": "Tutoriais", 
            "midia": "Mídia", "diversos": "Diversos",
            "conscientizacao": "Conscientização"
        };
        
        let files = JSON.parse(localStorage.getItem('files')) || [];
        let currentUser = null; 
        let currentFolder = 'projetos'; 
        let fileDataUrl = null; 

        // --- Adiciona a página de Conscientização na primeira vez que o site é carregado ---
        if (files.length === 0) {
            files.push({
                name: "Guardiões da História (Arqueologia em Ação)",
                url: "#", 
                type: "link",
                folder: "conscientizacao", 
                visible: true,
                developer: "dev01" 
            });
            localStorage.setItem('files', JSON.stringify(files));
        }
        // ---------------------------------------------------------------------------------

        // --- Funções Auxiliares ---

        function saveFiles() {
            localStorage.setItem('files', JSON.stringify(files));
        }

        function toggleInputType() {
            const type = document.getElementById('file-type').value;
            const container = document.getElementById('dynamic-input-container');
            
            if (type === 'link') {
                container.innerHTML = `
                    <label for="item-url">URL (Link):</label>
                    <input type="text" id="item-url" placeholder="http://recurso.com/link" style="width: 100%; margin-bottom: 10px;">
                `;
            } else {
                let acceptType = type === 'foto' ? 'image/*' : 'video/*';
                container.innerHTML = `
                    <label for="item-file">Carregar ${type.charAt(0).toUpperCase() + type.slice(1)}:</label>
                    <input type="file" id="item-file" accept="${acceptType}" onchange="handleFileUpload(event, '${type}')">
                `;
                fileDataUrl = null; 
            }
        }
        
        function handleFileUpload(event, type) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                fileDataUrl = e.target.result; 
                alert(`Arquivo (${type}) carregado com sucesso!`);
            };
            reader.readAsDataURL(file);
        }

        function changeFolder(folderKey) {
            currentFolder = folderKey;
            updateFolderSelector('dev');
            updateFolderSelector('user');
            
            if (document.getElementById('dev-panel').style.display === 'block') {
                renderDevPanel();
            } else if (document.getElementById('user-view').style.display === 'block') {
                renderUserView();
            }
        }

        function updateFolderSelector(view) {
            const selectorDiv = document.getElementById(`${view}-folder-selector`);
            selectorDiv.innerHTML = '';
            for (const key in FOLDERS) {
                const button = document.createElement('button');
                button.textContent = FOLDERS[key];
                button.setAttribute('onclick', `changeFolder('${key}')`);
                if (key === currentFolder) {
                    button.classList.add('active');
                }
                selectorDiv.appendChild(button);
            }
        }

        // --- Renderização ---

        function renderDevPanel() {
            const devList = document.getElementById('dev-file-list');
            devList.innerHTML = '';
            
            const filesInFolder = files.filter(file => file.folder === currentFolder);

            if (filesInFolder.length === 0) {
                devList.innerHTML = `<p>Nenhum item na pasta "${FOLDERS[currentFolder]}" para gerenciar.</p>`;
                return;
            }
            
            filesInFolder.forEach(file => {
                const item = document.createElement('div');
                item.className = 'dev-item';
                
                const originalIndex = files.findIndex(f => 
                    f.name === file.name && 
                    f.url === file.url && 
                    f.developer === file.developer && 
                    f.folder === file.folder
                );

                const visibilityText = file.visible ? 'Visível' : 'Oculto';
                
                item.innerHTML = `
                    <span>
                        <strong>[${file.type.toUpperCase()}]</strong> ${file.name}<br>
                        <span class="dev-info">Adicionado por: ${file.developer.toUpperCase()}</span> - *${visibilityText}*
                    </span>
                    <div>
                        <button onclick="toggleVisibility(${originalIndex})">${file.visible ? 'Ocultar' : 'Tornar Visível'}</button>
                        <button onclick="deleteItem(${originalIndex})">Excluir</button>
                    </div>
                `;
                devList.appendChild(item);
            });
        }

        // FUNÇÃO RENDERUSERVIEW (INCLUI ERRO E QUIZ)
        function renderUserView() {
            const userList = document.getElementById('user-file-list');
            userList.innerHTML = '';
            
            const visibleFiles = files.filter(file => file.visible && file.folder === currentFolder);

            if (visibleFiles.length === 0) {
                userList.innerHTML = `<p>Nenhum arquivo ou link visível na pasta "${FOLDERS[currentFolder]}".</p>`;
                return;
            }
            
            visibleFiles.forEach(file => {
                const item = document.createElement('div');
                item.className = 'file-item';
                
                let contentHTML = `
                    <p>
                        <strong>[${file.type.toUpperCase()}]</strong> ${file.name}<br>
                        <span class="dev-info">Adicionado por: ${file.developer.toUpperCase()}</span>
                    </p>
                `;
                
                // RENDERIZAÇÃO DA TELA DE QUIZ
                if (file.folder === 'conscientizacao' && file.name.includes("Guardiões da História")) {
                    contentHTML = `
                        <h2 style="color: var(--cor-principal); border-bottom: 2px solid var(--cor-borda); padding-bottom: 5px;">Conscientização</h2>
                        <p class="dev-info" style="text-align: center;">Conteúdo em desenvolvimento</p>
                        <div class="message">
                            A História de Salto está em suas mãos. Você está pronto para protegê-la?

Somos a equipe SESI Cybercraft e nosso Projeto de Inovação "Guardiões da História: Arqueologia em Ação" nasceu de uma missão simples: reconectar Salto com seu próprio passado.

Sua criança participou da nossa oficina e agora é uma Guardiã do Passado! Aqui, você encontra o Guia Completo da Arqueologia em Casa com vídeos rápidos, o Quiz de Conscientização e a Regra de Ouro para preservar o patrimônio.


                        </div>

                        <div class="quiz-container">
                            <h3>Quiz: Guardiões Da Historia </h3>
                            <div id="quiz-content">
                                </div>
                            <div class="quiz-result" id="quiz-result"></div>
                        </div>
                    `;
                    // Assegura que o Quiz seja carregado depois que o HTML for renderizado
                    setTimeout(loadQuiz, 0); 
                } 
                // Renderização normal para outros arquivos
                else if (file.type === 'link' || file.type === 'foto') {
                    contentHTML += `<a href="${file.url}" target="_blank">`;
                    if (file.type === 'link') {
                        contentHTML += `Acessar Recurso`;
                    } else if (file.type === 'foto') {
                        if (file.url.startsWith('data:image')) {
                            contentHTML += `<img src="${file.url}" alt="${file.name}">`;
                        } else {
                            contentHTML += `Visualizar Foto (Link Externo)`;
                        }
                    }
                    contentHTML += `</a>`;
                } else if (file.type === 'video') {
                    if (file.url.startsWith('data:video')) {
                        contentHTML += `<video controls src="${file.url}"></video>`;
                    } else {
                        contentHTML += `<a href="${file.url}" target="_blank">Assistir Vídeo (Link Externo)</a>`;
                    }
                }
                
                item.innerHTML = contentHTML;
                userList.appendChild(item);
            });
        }


        // --- Funções de Ação (Desenvolvedor) ---

        function addItem() {
            const name = document.getElementById('item-name').value.trim();
            const type = document.getElementById('file-type').value;
            const folder = document.getElementById('item-folder').value; 
            const visible = document.getElementById('item-visible').checked;
            
            let url;

            if (type === 'link') {
                url = document.getElementById('item-url').value.trim();
            } else {
                url = fileDataUrl; 
            }

            if (name === '' || !url) {
                alert(`Por favor, preencha o nome e ${type === 'link' ? 'a URL' : 'carregue o arquivo'}.`);
                return;
            }

            files.push({
                name: name,
                url: url, 
                type: type,
                folder: folder, 
                visible: visible,
                developer: currentUser 
            });

            saveFiles();
            
            changeFolder(folder); 
            
            document.getElementById('item-name').value = '';
            if (type === 'link') {
                document.getElementById('item-url').value = '';
            }
            document.getElementById('item-visible').checked = true;
            fileDataUrl = null; 
            toggleInputType(); 

            alert(`Item adicionado com sucesso na pasta ${FOLDERS[folder]}!`);
        }
        
        function toggleVisibility(index) {
            files[index].visible = !files[index].visible;
            saveFiles();
            renderDevPanel(); 
        }

        function deleteItem(index) {
            if (confirm(`Tem certeza que deseja excluir o item: ${files[index].name}?`)) {
                files.splice(index, 1);
                saveFiles();
                renderDevPanel();
                alert('Item excluído.');
            }
        }

        function developerLogin() {
            const username = document.getElementById('username').value.toLowerCase().trim();
            const password = document.getElementById('password').value.trim();

            if (DEVELOPERS[username] && DEVELOPERS[username] === password) {
                currentUser = username;
                document.getElementById('dev-name').textContent = currentUser.toUpperCase();
                
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('user-view').style.display = 'none';
                document.getElementById('dev-panel').style.display = 'block';
                
                toggleInputType();
                updateFolderSelector('dev');
                renderDevPanel();
            } else {
                alert('Credenciais de Desenvolvedor Inválidas.');
            }
        }

        function userLogin() {
            currentUser = 'user';
            
            document.getElementById('login-section').style.display = 'none';
            document.getElementById('dev-panel').style.display = 'none';
            document.getElementById('user-view').style.display = 'block';
            
            updateFolderSelector('user');
            renderUserView();
        }

        function logout() {
            currentUser = null;
            document.getElementById('login-section').style.display = 'block';
            document.getElementById('dev-panel').style.display = 'none';
            document.getElementById('user-view').style.display = 'none';

            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            
            currentFolder = 'projetos'; 
            fileDataUrl = null; 
        }

        // ------------------------------------------------------------------
        // --- Funções do Quiz de Arqueologia (Uma Pergunta por Vez) ---

        const QUIZ_QUESTIONS = [
            {
                question: "1. Qual é o trabalho principal do arqueólogo?",
                options: ["A) Construir casas.", "B) Estudar coisas antigas que os humanos deixaram (como panelas e ferramentas).", "C) Cuidar de animais na floresta."],
                answerIndex: 1 
            },
            {
                question: "2. O que são os 'vestígios' que o arqueólogo procura?",
                options: ["A) Pedaços de gelo.", "B) Coisas que contam a história das pessoas, como ossos, pinturas e objetos.", "C) Frutas da estação."],
                answerIndex: 1
            },
            {
                question: "3. Como chamamos o lugar onde os arqueólogos fazem escavações para encontrar objetos?",
                options: ["A) Praça de alimentação.", "B) Sítio Arqueológico.", "C) Campo de futebol."],
                answerIndex: 1
            },
            {
                question: "4. Se você achar uma ponta de flecha muito antiga, isso é um tipo de quê?",
                options: ["A) Um lixo moderno.", "B) Um brinquedo novo.", "C) Um artefato (um objeto feito por humanos no passado)."],
                answerIndex: 2
            },
            {
                question: "5. Que ferramenta o arqueólogo usa para cavar com muito cuidado?",
                options: ["A) Um trator grande.", "B) Pincéis pequenos e colheres.", "C) Uma máquina de lavar."],
                answerIndex: 1
            }
        ];

        let currentQuestionIndex = 0; // Controla a pergunta atual
        let correctAnswers = 0;
        let quizFinished = false; 

        function loadQuiz() {
            currentQuestionIndex = 0;
            correctAnswers = 0;
            quizFinished = false;
            renderQuestion();
            document.getElementById('quiz-result').textContent = 'Responda as 5 perguntas!';
        }

        function renderQuestion() {
            const quizDiv = document.getElementById('quiz-content');
            if (!quizDiv) return;

            if (quizFinished) {
                // Se terminou, exibe apenas a mensagem final
                quizDiv.innerHTML = '<p>Quiz Finalizado! Role para baixo e veja seu resultado.</p>';
                return;
            }

            const q = QUIZ_QUESTIONS[currentQuestionIndex];
            quizDiv.innerHTML = ''; 

            const questionDiv = document.createElement('div');
            questionDiv.className = 'quiz-question';
            questionDiv.innerHTML = q.question;
            
            q.options.forEach((option, oIndex) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'quiz-option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => checkAnswer(oIndex, optionDiv); 
                questionDiv.appendChild(optionDiv);
            });

            quizDiv.appendChild(questionDiv);
            document.getElementById('quiz-result').textContent = `Pergunta ${currentQuestionIndex + 1} de ${QUIZ_QUESTIONS.length}`;
        }

        function checkAnswer(selectedIndex, element) {
            const q = QUIZ_QUESTIONS[currentQuestionIndex];
            const isCorrect = selectedIndex === q.answerIndex;

            // Desabilita todas as opções de clique para esta pergunta
            Array.from(element.parentElement.querySelectorAll('.quiz-option')).forEach(opt => {
                opt.onclick = null;
                opt.style.cursor = 'default';
                opt.style.backgroundColor = 'transparent';
            });

            // Marca a correta e a incorreta
            Array.from(element.parentElement.querySelectorAll('.quiz-option')).forEach((opt, idx) => {
                if (idx === q.answerIndex) {
                    opt.classList.add('correct');
                    opt.style.fontWeight = 'bold';
                } else if (idx === selectedIndex && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });

            if (isCorrect) {
                correctAnswers++;
            }

            // Adiciona um botão para ir para a próxima pergunta após a resposta
            const nextButton = document.createElement('button');
            nextButton.textContent = currentQuestionIndex < QUIZ_QUESTIONS.length - 1 ? 'Próxima Pergunta →' : 'Ver Resultado Final';
            nextButton.style.marginTop = '20px';
            nextButton.style.padding = '10px 20px';
            nextButton.style.backgroundColor = 'var(--cor-destaque-usuario)';
            nextButton.style.color = 'white';
            nextButton.onclick = moveToNextQuestion;

            element.parentElement.appendChild(nextButton);

            // Atualiza o placar provisório no resultado
            document.getElementById('quiz-result').innerHTML += `<br> <span class="${isCorrect ? 'correct' : 'incorrect'}">${isCorrect ? 'Correto!' : 'Errado!'}</span>`;
        }

        function moveToNextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < QUIZ_QUESTIONS.length) {
                renderQuestion();
            } else {
                quizFinished = true;
                renderQuestion(); // Renderiza a mensagem final
                updateQuizResult();
            }
        }

        function updateQuizResult() {
            const resultDiv = document.getElementById('quiz-result');
            resultDiv.innerHTML = `
                <h3 style="color: var(--cor-principal);"> QUIZ FINALIZADO! </h3>
                Resultado Final: <span class="${correctAnswers >= 3 ? 'correct' : 'incorrect'}">${correctAnswers} de ${QUIZ_QUESTIONS.length} acertos!</span>
                <button onclick="loadQuiz()" style="margin-top: 15px; background-color: var(--cor-secundaria);">Tentar Novamente</button>
            `;
        }
        // ------------------------------------------------------------------

        // Inicializa a página
        logout();
        toggleInputType(); 
    </script>
</body>
</html>
